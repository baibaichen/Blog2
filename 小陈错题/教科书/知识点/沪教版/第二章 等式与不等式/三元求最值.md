# 徐汇例题: $x^2 + y^2 + z^2 + xy + yz + zx = 1$

> [!IMPORTANT]
>
> 已知 $ x, y, z \in \mathbb{R} $，并且满足  
> $$
> x^2 + y^2 + z^2 + xy + yz + zx = 1
> $$
> 问下面哪一条是错误的：
> - A. $ xyz $ 的最大值是 $\frac{\sqrt{6}}{6} $  
> - B. $ x + y + z $ 的最大值是 $\frac{\sqrt{6}}{2} $  
> - C. $ x $ 的最大值是 $\frac{\sqrt{6}}{2} $  
> - D. $ x + y $ 的最大值是 $\sqrt{2} $
>

## 前置的三元不等式
### $x^2 + y^2 + z^2 \geqslant xy + yz + zx$

不等式 $x^2 + y^2 + z^2 \geqslant xy + yz + zx$ 是一个基本的不等式，适用于所有实数 $x, y, z$。它可以通过完全平方公式推导出来，具体证明如下，考虑平方和：
$$
\begin{aligned}
(x - y)^2 + (y - z)^2 + (z - x)^2 &\geqslant 0 \Rightarrow\\
x^2 - 2xy + y^2 + y^2 - 2yz + z^2 + z^2 - 2zx + x^2 &\geqslant 0 \Rightarrow\\
2x^2 + 2y^2 + 2z^2 - 2xy - 2yz - 2zx &\geqslant 0 \Rightarrow\\
x^2 + y^2 + z^2 - xy - yz - zx &\geqslant 0 \Rightarrow\\
x^2 + y^2 + z^2 &\geqslant xy + yz + zx
\end{aligned}
$$

这个不等式没有特定的名称，但它是柯西-施瓦茨不等式（Cauchy-Schwarz inequality）的一个特例或推论。在不等式理论中，它常用于证明其他不等式，或者作为优化问题中的约束条件。

如果需要进一步应用，例如在求极值问题时，这个不等式可以帮助建立变量之间的关系。

#### 用柯西-施瓦茨不等式 如何构造和这个特殊的不等式？

要使用柯西-施瓦茨不等式（Cauchy-Schwarz inequality）推导出不等式 $x^2 + y^2 + z^2 \geqslant xy + yz + zx$，可以按照以下步骤构造：

##### 柯西-施瓦茨不等式的一般形式
对于任意实数序列 $a_1, a_2, \dots, a_n$ 和 $b_1, b_2, \dots, b_n$，有：
$$
\left( \sum_{i=1}^n a_i b_i \right)^2 \leqslant \left( \sum_{i=1}^n a_i^2 \right) \left( \sum_{i=1}^n b_i^2 \right)
$$

##### 应用到三个变量 $x, y, z$
考虑序列：
- $a_1 = x, a_2 = y, a_3 = z$
- $b_1 = y, b_2 = z, b_3 = x$

则：
$$
\begin{aligned}
\sum_{i=1}^3 a_i b_i &= xy + yz + zx \\
\sum_{i=1}^3 a_i^2 &= x^2 + y^2 + z^2 \\
\sum_{i=1}^3 b_i^2 &= y^2 + z^2 + x^2 = x^2 + y^2 + z^2
\end{aligned}
$$

应用柯西-施瓦茨不等式：

$$
(xy + yz + zx)^2 \leqslant (x^2 + y^2 + z^2)(x^2 + y^2 + z^2) = (x^2 + y^2 + z^2)^2
$$

从而：
$$
|xy + yz + zx| \leqslant x^2 + y^2 + z^2
$$
这意味着：
- 如果 $xy + yz + zx \geqslant 0$，则直接有 $xy + yz + zx \leqslant x^2 + y^2 + z^2$。
- 如果 $xy + yz + zx < 0$，则由于 $x^2 + y^2 + z^2 \geqslant 0$，不等式 $x^2 + y^2 + z^2 \geqslant xy + yz + zx$ 显然成立。

因此，无论如何都有：
$$
x^2 + y^2 + z^2 \geqslant xy + yz + zx
$$
##### 总结
通过巧妙的序列选择（即 $a_i$ 和 $b_i$ 的循环设置），柯西-施瓦茨不等式可以直接导出所需的不等式。这是一种常见的技巧，用于处理对称多项式的不等式。

### $(x+y+z)^2 \geqslant 3(xy + yz + zx)$

不等式 $(x+y+z)^2 \geqslant 3(xy + yz + zx)$ 是一个常见的不等式，通常被称为**平方和不等式**，它适用于所有实数 $x, y, z$，由  $x^2 + y^2 + z^2 \geqslant xy + yz + zx$ 推导而来：

$$
\begin{aligned}
(x + y + z)^2 - 3(xy + yz + zx) &\Rightarrow\\
x^2 + y^2 + z^2 + 2(xy + yz + zx) - 3(xy + yz + zx) &\equiv x^2 + y^2 + z^2 - xy + yz + zx\\
\because x^2 + y^2 + z^2 &\geqslant xy + yz + zx \\
\therefore(x + y + z)^2 &\geqslant 3(xy + yz + zx)
\end{aligned}
$$

## 解答
### 第一步：化简条件
我们知道：
$$
x^2 + y^2 + z^2 + xy + yz + zx = 1 \tag{0}
$$
有恒等式：
$$
x^2 + y^2 + z^2 + xy + yz + zx = \frac{1}{2} \left[ (x+y)^2 + (y+z)^2 + (z+x)^2 \right] \tag{1}
$$
不过直接看另一种方法：

$$
\begin{aligned}
S &= x + y + z \\
Q &= xy + yz + zx \\
(x+y+z)^2 &= x^2 + y^2 + z^2 + 2xy +2yz+ 2zx \Rightarrow \\
(x+y+z)^2 -  (xy + yz + zx) &=x^2 + y^2 + z^2 +xy + yz + zx =1\Rightarrow \\
S^2 - Q &= 1  \Rightarrow  \\
Q &= S^2 - 1
\end{aligned}
$$


### 第二步：求 $x + y + z$ 的最大值（B选项）
任意三元实数满足 $(x+y+z)^2  \geqslant 3(xy + yz + zx)$，即：
$$
\begin{aligned}
S^2 &\geqslant 3Q \\
S^2 &\geqslant 3(S^2 - 1) \\
S^2 &\geqslant 3S^2 - 3 \\
3 &\geqslant 3S^2 - S^2 \\
2S^2 &\leqslant 3 \\
S^2 &\leqslant \frac{3}{2}
\end{aligned}
$$
所以：
$$
S \leqslant \sqrt{\frac{3}{2}} = \frac{\sqrt{6}}{2}
$$
✅ 因此 **B 的最大值 $\frac{\sqrt{6}}{2}$ 是正确的**。

---
> [!TIP]
>
> 转化为柯西不等式的形式，直接应用不等式求最值。
>
> 考虑序列：
> - $a_1 = 1, a_2 = 1, a_3 = 1$
> - $b_1 = x+y, b_2 = y+z, b_3 =z+ x$
> $$
> \begin{aligned}
> (x + y + y + z + z + x)^2 &\leqslant (1^2 + 1^2 + 1^2)[(x + y)^2 + (y + z)^2 + (z + x)^2]\\
> 4(x+y+z)^2 &\leqslant 3 \times 2\\
> |(x+y+z)|&\leqslant \sqrt{\frac{3}{2}} = \frac{\sqrt{6}}{2}\\
> (x+y+z)&\leqslant  \frac{\sqrt{6}}{2}
> \end{aligned}
> $$
---

### 第三步：求 $x+y$ 的最大值（D选项）


由式 (1)：
$$
(x+y)^2 + (y+z)^2 + (z+x)^2 = 2 \tag{2}
$$
显然：
$$
(x+y)^2 \leqslant 2 \quad \Rightarrow \quad |x+y| \leqslant \sqrt{2}
$$
当 $x = y = \frac{\sqrt{2}}{2},\ z = -\frac{\sqrt{2}}{2}$ 时取等号。

✅ 因此 **D 的最大值 $\sqrt{2}$ 是正确的**。

### 第四步：求 $x$ 的最大值（C选项）

#### 1. 构造关于 $y$ 的二次方程： 
原方程 $x^2 + y^2 + z^2 + xy + yz + zx = 1$ 中，固定 $x$，将其视为关于 $y$ 的二次方程：  
$$
y^2 + (x + z)y + (x^2 + z^2 + zx - 1) = 0
$$
这里将 $z$ 也视为变量，但为了简化，可进一步假设 $z$ 与 $y$ 对称，或令 $z = y$ 利用对称性简化计算。

#### 2. 利用判别式非负：
若 $y$ 是实数，则上述方程的判别式 $\Delta \geqslant 0$：  
$$
\Delta = (x + z)^2 - 4 \cdot 1 \cdot (x^2 + z^2 + zx - 1) \geqslant 0
$$
展开并整理得： 
$$
x^2 + 2xz + z^2 - 4x^2 - 4z^2 - 4xz + 4 \geqslant 0 \implies -3x^2 - 2xz - 3z^2 + 4 \geqslant 0
$$
#### 3. 进一步简化（利用对称性）： 
由于 $z$ 也是实数，可将其视为关于 $z$ 的二次方程：
$$
3z^2 + 2xz + (3x^2 - 4) \leqslant 0
$$
该方程有实数解的条件是其判别式 $\Delta' \geqslant 0$：  
$$
\Delta' = (2x)^2 - 4 \cdot 3 \cdot (3x^2 - 4) = 4x^2 - 36x^2 + 48 = -32x^2 + 48 \geqslant 0
$$
解得：  
$$
x^2 \leqslant \frac{48}{32} = \frac{3}{2} \implies |x| \leqslant \frac{\sqrt{6}}{2}
$$

✅ 因此 **C 的最大值 $\frac{\sqrt{6}}{2}$ 是正确的**。

---

> [!TIP]
>
> 为求 $x$ 的最大值，考虑固定 $x$，并令 $y = z$（由对称性，极值往往在对称点取得）。代入式 (0)：
> $$
> x^2 + 2y^2 + 2xy + y^2 = x^2 + 3y^2 + 2xy = 1
> $$
> 整理为关于 $y$ 的二次方程：
> $$
> 3y^2 + 2xy + (x^2 - 1) = 0
> $$
> 要求 $y$ 为实数，判别式非负：
>
> $$
> \begin{align*}
> \Delta = (2x)^2 - 4 \cdot 3 \cdot (x^2 - 1) &\geqslant 0 \\
> 4x^2 - 12(x^2 - 1) &\geqslant 0 \\
> 4x^2 - 12x^2 + 12 &\geqslant 0 \\
> -8x^2 + 12 &\geqslant 0 \\
> 8x^2 &\leqslant 12 \\
> x^2 &\leqslant \frac{3}{2}
> \end{align*}
> $$
>
> 所以
> $$
> |x| \leqslant \frac{\sqrt{6}}{2}
> $$
>
> 当判别式为零时，$y = -\frac{x}{3}$，代入方程得 $x^2 = \frac{3}{2}$，即 $x = \frac{\sqrt{6}}{2}$（取最大值）。因此，$x$ 的最大值为 $\frac{\sqrt{6}}{2}$.
>

---
### 第五步：求 $xyz$ 的最大值（A选项）

> 瞪眼法

当 $x=1, y=-\frac{2}{3},z=-\frac{2}{3}$时，最大值为：$\frac{4}{9}$

## 对称条件下多元变量的最值问题
> [!IMPORTANT]
>
> 1. 已知实数 $x, y, z$ 满足 $x^2 + y^2 + z^2 + xy + yz + zx = 1$，求 $x$ 最大值。
> 2. 已知实数 $x, y, z$ 满足 $ x + y + z = 5 $，$ xy + yz + zx = 3 $，求 $x$ 最大值。
>
> 这种题的考点是什么？有什么套路？
>

### 考点分析  
这两道题均属于**对称条件下多元变量的最值问题**，核心考点围绕以下内容展开：  

#### 1. 对称多项式的变形与转化  
两道题均给出关于 $x, y, z$ 的对称条件（对称多项式），需通过对称多项式的基本性质（如平方和、和积关系）将问题简化为单变量或二元变量的问题。  

#### 2. 判别式法求变量范围  
通过将多元方程视为关于某一变量（如 $y$ 或 $z$）的一元二次方程，利用**实数解存在的充要条件是判别式非负**来推导目标变量（如 $x$）的取值范围，从而找到最大值。  

#### 3. 韦达定理的应用  
第二题直接给出 $x + y + z$ 和 $xy + yz + zx$，可通过韦达定理将其转化为以 $y, z$ 为根的二次方程，利用判别式求 $x$ 的范围。  

#### 4. ⭐对称性假设（特殊值法）
在对称条件下，极值往往出现在对称点（如 $y = z$），通过对称性假设可快速简化问题，验证或求解最值。  


### 解题套路  
两道题的解题思路高度相似，核心套路是：**对称条件→转化为二次方程→利用判别式求极值**，具体步骤如下：  


#### 套路1：构造二次方程，利用判别式非负 
对于对称条件下的多元最值问题，可将目标变量（如 $x$）视为参数，其他变量（如 $y, z$）视为一元二次方程的根，通过判别式 $\Delta \geqslant 0$ 推导 $x$ 的范围。  

**示例（第2题）**：  
已知 $x + y + z = 5$，$xy + yz + zx = 3$，求 $x$ 的最大值。  
- 由 $x + y + z = 5$，得 $y + z = 5 - x$；  
- 由 $xy + yz + zx = 3$，得 $yz = 3 - x(y + z) = 3 - x(5 - x) = x^2 - 5x + 3$；  
- 因此，$y$ 和 $z$ 是二次方程 $t^2 - (5 - x)t + (x^2 - 5x + 3) = 0$ 的两个实根；  
- 由于 $y, z$ 为实数，判别式 $\Delta = (5 - x)^2 - 4(x^2 - 5x + 3) \geqslant 0$；  
- 展开并整理得：$25 - 10x + x^2 - 4x^2 + 20x - 12 \geqslant 0 \implies -3x^2 + 10x + 13 \geqslant 0$；  
- 解不等式得：$-\frac{1}{3} \leqslant x \leqslant \frac{13}{3}$，故 $x$ 的最大值为 $\frac{13}{3}$。  


#### ⭐套路2：对称性假设（$y = z$）简化计算
在对称问题中，极值常出现在对称点（如 $y = z$），通过假设 $y = z$ 可将三元问题降为二元问题，进一步简化计算。  

**示例（第1题）**：  
已知 $x^2 + y^2 + z^2 + xy + yz + zx = 1$，求 $x$ 的最大值。  
- 假设 $y = z$（对称性假设），原方程变为： $x^2 + 2y^2 + xy + y^2 + xy = x^2 + 3y^2 + 2xy = 1$；  
- 整理为关于 $y$ 的二次方程：$3y^2 + 2x y + (x^2 - 1) = 0$；  
- 由于 $y$ 为实数，判别式 $\Delta = (2x)^2 - 4 \cdot 3 \cdot (x^2 - 1) \geqslant 0$；  
- 展开得：$4x^2 - 12x^2 + 12 \geqslant 0 \implies -8x^2 + 12 \geqslant 0 \implies x^2 \leqslant \frac{3}{2}$；  
- 因此 $|x| \leqslant \frac{\sqrt{6}}{2}$，故 $x$ 的最大值为 $\frac{\sqrt{6}}{2}$（与之前用判别式法结果一致）。  


#### 套路3：平方和变形与柯西不等式 
部分题目可通过平方和变形（如配方法）转化为柯西不等式的形式，直接应用不等式求最值。  

**示例（第1题另一种解法）**：  
原方程 $x^2 + y^2 + z^2 + xy + yz + zx = 1$ 可变形为：  
$$\frac{1}{2}[(x + y)^2 + (y + z)^2 + (z + x)^2] = 1$$  
即 $(x + y)^2 + (y + z)^2 + (z + x)^2 = 2$。  
由柯西不等式：  
$$(x + y + y + z + z + x)^2 \leqslant (1^2 + 1^2 + 1^2)[(x + y)^2 + (y + z)^2 + (z + x)^2]$$  
即 $(2x + 2y + 2z)^2 \leqslant 3 \cdot 2 = 6$，故 $x + y + z \leqslant \sqrt{\frac{6}{4}} = \frac{\sqrt{6}}{2}$（但此方法更适用于求 $x + y + z$ 的最值，而非单变量 $x$）。  


### 总结
这类题的核心是**利用对称性将多元问题降维**，通过构造二次方程或应用不等式（如判别式法、柯西不等式）求解单变量的最值。关键步骤为：  
1. 观察对称条件，选择目标变量（如 $x$）；  
2. 将其他变量（$y, z$）视为二次方程的根，或通过对称性假设 $y = z$ 简化；  
3. 利用判别式非负或不等式性质推导目标变量的范围，找到最值。  

这类题在沪教版第二章不等式中属于典型综合题，重点考查学生对对称多项式的处理能力、判别式法的应用能力，以及通过降维简化问题的思维能力。